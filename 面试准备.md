## 重点准备
- mugen测试框架的原理
- c的一些八股
- 项目
  
## 自我介绍

面试官好，我叫张宏涛，本科就读于中国矿业大学电子信息科学与技术专业，本科排名专业第七，获得过国家励志奖学金以及华为的奖学金。目前硕士就读于电子科技大学计算机技术专业，硕士期间获得研究生学业一等奖学金。

在项目经历方面，我参与了多个高水平的嵌入式开发项目，积累了丰富的实战经验。例如，在国家电网的“高端控制芯片多核非对称软件设计技术研究”项目中，我针对继电保护装置的特殊需求，基于ARM多核处理器设计并实现了一套AMP架构，其中一组核运行Linux系统，一组核运行裸机实时系统。项目中，我负责基于共享内存和外部中断机制实现双通道的IPC通信方案，并进一步引入RPMSG协议进行优化，显著提升了通信效率和系统的稳定性。

在“基于Armv8-A架构的微内核车用操作系统虚拟化开发”项目中，我参与了虚拟化模块的架构设计和具体实现，负责CPU、内存、时钟虚拟化模块以及虚拟机生命周期管理的开发。我设计了一种基于共享内存的虚拟机间通信机制，支持多核微内核镜像和Linux镜像在硬件和仿真平台上高效运行，同时解决了虚拟机通信中的数据一致性和性能瓶颈问题。
  
此外，我还参与了中科院软件所PLCT实验室的线上实习，深度参与了openEuler RISC-V社区的开发工作，包括mugen测试框架的维护与测试用例修复、OBS平台的包构建等。在此期间，我不仅深入学习了RISC-V架构，还积累了丰富的开源社区协作经验，对开源流程和工具链有了更深入的理解。

  

## mugen测试框架

Mugen 是 openEuler 社区开发的用于 Linux 系统测试的开源框架，提供公共配置和方法以简化测试用例的编写和执行。 Mugen是OpenEuler社区开发的一套轻量级、高效的测试框架，专注于操作系统的功能验证、兼容性测试、性能测试和稳定性测试。它采用模块化设计，将测试用例按照功能划分为独立模块，便于开发和维护。测试用例通常使用Shell脚本编写，可以直接操作系统命令和接口，适应多种测试场景。

Mugen支持批量执行测试用例，通过断言机制对测试结果进行判断，提供详细的日志和报告，便于问题排查和分析。它具备高扩展性，用户可以根据需求自定义测试用例或模块，轻松集成到CI/CD流程，实现全流程自动化测试。此外，Mugen对多架构和多平台（如x86、ARM、RISC-V）提供良好支持，适用于验证操作系统在不同硬件环境下的兼容性。

凭借其开源和社区支持，Mugen持续优化迭代，为OpenEuler操作系统开发提供了强大的质量保障工具，是一套灵活、高效的测试框架解决方案。


## obs是什么？
Open Build Service（OBS）是一个开源的软件构建和发布平台，它支持多发行版、多架构、多格式的软件包构建。



## 项目一
Q1：为什么要采用AMP架构？
非对称同构多核系统，AMP架构的原因是有的的任务需要实时性强，有的任务需要提供更多的服务，所以需要实现在一个cpu上运行多个操作系统的方法。
Q2：具体实现
Linux侧已有rpmsg实现，而裸核侧没有，搬运rpmsg-lite到裸核实现该机制。



## 项目二
虚拟化平台实现

- 什么是type2类型虚拟化？
类型 II VMM 在主操作系统（Host OS）中作为一个应用程序运行，并依赖主操作系统进行内存管理，处理器调度，资源分配，和硬件驱动。它仅仅提供虚拟化服务。实现类型 II VMM 比实现类型 I VMM 要简单，因为类型 II VMM 不直接和硬件打交道。但类型II VMM的性能不如类型I VMM好
- 这个easyada是什么？
是和普华基础软件研究公司一起研发的适用于汽车的操作系统。
因为汽车需要运行多种任务，所以通过这种方式来满足，和上面一个项目一样，都是为了
汽车操作系统需要虚拟化技术主要是为了实现**功能隔离**和**安全性提升**，将安全关键任务（如动力控制）与非安全任务（如娱乐系统）隔离，避免互相干扰。此外，虚拟化可以整合多个ECU，提升硬件资源利用率，支持多个操作系统共存，提高开发和测试效率，同时满足ISO 26262等安全法规的要求。在自动驾驶和车联网场景下，虚拟化也能提供必要的性能和安全保障。

- cpu虚拟化
在ARMv8架构下，CPU虚拟化通过硬件扩展（如EL2特权级、Stage-2地址翻译和虚拟中断控制器）和Hypervisor实现。Hypervisor运行在EL2，负责管理虚拟机的资源、调度和隔离。Stage-2地址翻译将虚拟机的虚拟地址映射到物理地址，为每个虚拟机提供独立的内存空间；陷入与模拟机制捕获虚拟机的敏感指令（如I/O或特权寄存器访问），并通过Hypervisor模拟执行；虚拟中断管理通过vGIC分发中断到目标vCPU。vCPU的运行状态由Hypervisor保存与恢复，通过时间片调度实现多虚拟机并发运行，提供线程级调度灵活性，同时保证虚拟机之间的硬件级隔离和安全性。


hypervisor运行在el2，管理vcpu的调度，当cpu要执行某些敏感指令时刻陷入到el2的hypervisor进行处理，处理之后返回。 vcpu状态由hypervisor管理，所以可以实现调度



  
- 内存虚拟化
在ARMv8架构下，内存虚拟化通过硬件支持的多级地址翻译机制和Hypervisor实现，以保证虚拟机的内存隔离和高效管理。主要依赖Stage-2地址翻译，Hypervisor运行在EL2特权级，配置并管理Stage-2页表，将虚拟机的物理地址（Guest Physical Address, GPA）映射到宿主机的物理地址（Host Physical Address, HPA）。结合MMU（内存管理单元），虚拟机的虚拟地址（Guest Virtual Address, GVA）先通过Stage-1转换为GPA，再通过Stage-2映射为HPA，从而实现两级地址转换。通过VMID（虚拟机标识符）标记TLB条目，避免不同虚拟机的地址冲突，提升性能。Hypervisor还负责处理内存访问的陷入，模拟非法访问操作，确保虚拟机的内存安全和隔离，同时支持动态内存分配和回收，提高硬件资源利用率。

两阶段地址映射就是，虚拟机os管理一个页表，负责映射os的虚拟地址到中间物理地址，就是虚拟机os认为的物理地址，这个地址由hypervisor管理，hypervisor中有一个页表负责将这个中间物理地址映射到真实的物理地址。






  - 时钟虚拟化
  在ARMv8架构下，时钟虚拟化通过硬件支持和Hypervisor管理实现，确保虚拟机时间的独立性和隔离性。每个CPU核心提供物理计数器、物理定时器和虚拟定时器，其中虚拟定时器通过添加偏移量（CNTVOFF_EL2寄存器）将物理时间转换为虚拟机的时间视图。Hypervisor运行在EL2特权级，负责配置偏移量，为每个虚拟机提供独立的计时环境。当虚拟定时器触发中断时，由Hypervisor捕获并注入到对应的虚拟机，同时动态调整虚拟时间以处理暂停和恢复场景。虚拟定时器支持精确的定时任务、性能监控和实时需求，通过隔离和灵活性满足虚拟化环境下的时间管理要求。



## 项目三

EXT2是Linux的一种经典文件系统，它通过块组划分存储区域，每个块组独立管理元数据和数据，核心结构包括**超级块**、**块位图**、**inode表**和**数据块**。

• **超级块**：存储文件系统的全局信息，例如总块数、块大小和文件系统状态，是整个文件系统的入口。

• **块位图和inode位图**：分别记录块组中数据块和inode的使用情况，标识哪些是空闲的。

• **inode表**：每个文件对应一个inode，包含文件的元数据，例如大小、权限、时间戳，以及指向实际数据块的指针。

• **数据块**：存储文件的实际内容。通过直接块指针、单级间接、双级间接和三级间接指针寻址，支持灵活的文件大小管理。

EXT2没有日志功能，因此写入速度较快，但系统崩溃时可能导致数据不一致，需要通过 fsck 工具修复。它的设计简单高效，适用于小型嵌入式设备，是EXT3和EXT4的基础文件系统。
## 结束问题
- 实习生是干什么
- 几点下班？
- 部门主要是干啥
